webpackJsonp([0],{0:function(e,t){},"1ssg":function(e,t){},Fide:function(e,t){},G2rt:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=s("VU/8")({name:"App"},n,!1,function(e){s("1ssg")},null,null).exports,r=s("/ocq"),l=s("8+8L");a.a.use(l.a);class o{constructor(){this.key="5tOWgkY6bwwjkPgEgl7TlcDi5jWS1l7hl6y3l5hw"}search(e){if(!e)e={};return e.api_key=this.key,e.format="json",e.max="25",e.offser="0",a.a.http.get("https://api.nal.usda.gov/ndb/search/?"+this.parseParams(e))}getNutrition(e){if(!e)e={};return e.api_key=this.key,e.format="json",e.type="b",a.a.http.get("https://api.nal.usda.gov/ndb/reports/?"+this.parseParams(e))}parseParams(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join("&")}}var u={name:"InputIngredient",data:()=>({list:null,search:null,selectedItem:null,selectedItemNutrients:null,openedList:!1}),computed:{selectedItemId(){return this.selectedItem.ndbno}},methods:{onSelect(e){this.clearNutrients(),this.clearList(),this.selectItem(e),this.getNutrition({ndbno:this.selectedItemId}).then(e=>{this.fillNutrients(e.data.report.food)})},selectItem(e){this.selectedItem=e},fillNutrients(e){this.selectedItemNutrients=e},clearList(){this.list=null},clearNutrients(){this.selectedItemNutrients=null},onChangeInput(e){this.getList({q:e}).then(e=>{this.fillSelect(e.body.list?e.body.list.item:[])})},getList:e=>(new o).search(e),fillSelect(e){this.list=e},getNutrition:e=>(new o).getNutrition(e)},mounted(){}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"input-group"},[e._v("\n      Search for food\n      "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{placeholder:"ex: broccoli raw ..."},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},function(t){return e.onChangeInput(e.search)}]}})]),e._v(" "),e.list&&e.list.length>0?s("div",{staticClass:"list"},e._l(e.list,function(t){return s("div",{staticClass:"list-item",on:{click:function(s){return e.onSelect(t)}}},[e._v("\n          "+e._s(t.name)+"\n      ")])}),0):e._e(),e._v(" "),e.selectedItemNutrients?s("div",{staticClass:"nutrients"},[s("div",{staticClass:"link",on:{click:function(t){e.openedList=!e.openedList}}},[e._v(e._s(e.selectedItem.name))]),e._v(" "),s("br"),e._v(" "),e.openedList?s("div",{staticClass:"nutList"},[s("div",[e._v("For 100 "+e._s(e.selectedItemNutrients.ru))]),e._v(" "),s("div",{staticClass:"table"},e._l(e.selectedItemNutrients.nutrients,function(t){return s("div",{staticClass:"row"},[s("div",{staticClass:"cell"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"cell"},[e._v(e._s(e._f("round")(t.value))+" "+e._s(t.unit))])])}),0)]):e._e()]):e._e()])},staticRenderFns:[]};var c=s("VU/8")(u,d,!1,function(e){s("qMHP")},"data-v-d5b69c7a",null).exports;const m={filters:{round:e=>Math.round(e),formatTime(e){var t=new Date(e);t.getMonth(),t.getDate(),t.getFullYear();return t.getHours()+":"+t.getMinutes()+" "+((e=>{let t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()})(t)?"today":"yesterday")}},methods:{generateId:()=>"eatSmarterList_"+Math.random().toString(36).substr(2,9)}};var v={name:"InputValue",data:()=>({active:!1,selectedHH:null}),watch:{active(){this.active||(this.selectedHH=null)}},mixins:[m],methods:{update(){this.$emit("onChangeTime",this.modTime())},modTime(){var e=new Date,t=new Date;t.setDate(t.getDate()-1),t.setHours(this.selectedHH,0);var s=new Date;return s.setHours(this.selectedHH,0),s>e?t.getTime():s.getTime()},getTodayHour:()=>(new Date).getHours(),hoursToday(){for(var e=[],t=0;t<=this.getTodayHour();t++)e.push(t);return e},hoursYesterday(){for(var e=[],t=this.getTodayHour()+1;t<24;t++)e.push(t);return e},activate(){alert()}},mounted(){}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"flex-center"},[e._v("now")]),e._v(" "),s("div",{staticClass:"flex-center divider"},[e._v(" ----- or -----")]),e._v(" "),s("div",{staticClass:"flex-vcenter"},[s("div",{staticClass:"checkbox",class:{active:e.active},on:{click:function(t){e.active=!e.active}}}),e._v(" "),s("div",[s("nobr",[e._v("set time")])],1),e._v(" "),s("label",{on:{click:function(t){e.active=!0}}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedHH,expression:"selectedHH"}],attrs:{disabled:!e.active},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedHH=t.target.multiple?s:s[0]},function(t){return e.update()}]}},[e._l(e.hoursYesterday(),function(t){return s("option",{domProps:{value:t}},[e._v("\n      \t        "+e._s(t)+":00 - "+e._s(t+1===24?"00":t+1)+":00\n                "+e._s("yesterday")+"\n      \t    ")])}),e._v(" "),e._l(e.hoursToday(),function(t){return s("option",{domProps:{value:t}},[e._v("\n                "+e._s(t)+":00 - "+e._s(t+1===24?"00":t+1)+":00\n                "+e._s("today")+"\n            ")])})],2)])])])},staticRenderFns:[]};var _={name:"InputValue",data:()=>({consumedValue:100,selectedTime:null}),components:{TimeActivator:s("VU/8")(v,h,!1,function(e){s("Fide")},"data-v-d8509b22",null).exports},methods:{add(){isNaN(this.consumedValue)||(this.$emit("add",this.consumedValue,this.selectedTime),this.clearValue())},clearValue(){this.consumedValue=100},changeTime(e){this.selectedTime=e}},mounted(){}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"flex-vcenter"},[s("div",[e._v("\n            Consumed value:\n        ")]),e._v(" "),s("div",{staticClass:"flex-vcenter"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.consumedValue,expression:"consumedValue"}],staticClass:"small",domProps:{value:e.consumedValue},on:{input:function(t){t.target.composing||(e.consumedValue=t.target.value)}}}),e._v(" "),s("div",[e._v("\n                g/ml\n            ")])])]),e._v(" "),s("TimeActivator",{on:{onChangeTime:e.changeTime}}),e._v(" "),s("button",{on:{click:function(t){return e.add()}}},[e._v("\n        Add to daily list\n    ")])],1)},staticRenderFns:[]};var p=s("VU/8")(_,f,!1,function(e){s("G2rt")},"data-v-19f86a5a",null).exports,g=s("UYmX"),y=s.n(g),C={name:"ConsumedList",data:()=>({daily:y.a}),props:{consumedList:{type:Array,default:()=>[]}},mixins:[m],computed:{totalNutrients(){const e=(e,t)=>t.nutrients.find(t=>t.name.toLowerCase()===e.toLowerCase());return this.consumedList.reduce((t,s)=>(t.forEach(t=>t.val+=((t,s)=>e(t,s)?+e(t,s).val:0)(t.name,s)),t),this.emptyArray)},totalWithDaily(){return this.totalNutrients.map(e=>{const t=e=>this.daily.find(t=>t.name.toLowerCase()===e.toLowerCase());e.daily_val=t(e.name)?t(e.name).daily_val:0,e.consume=t(e.name)?t(e.name).consume:"",e.ru=t(e.name)?t(e.name).ru:""})},consumedListSorted(){return this.consumedList.sort((e,t)=>e.time-t.time)},emptyArray(){var e=[];return this.consumedList.forEach(t=>t.nutrients.forEach(t=>{e.find(e=>e.name.toLowerCase()===t.name.toLowerCase())||e.push({name:t.name,unit:t.unit})})),e.map(e=>e={name:e.name,val:0,unit:e.unit})}},methods:{remove(e){this.$emit("remove",e)},isRed(e){return!this.isGreen(e)},isGreen(e){if(e.consume&&e.consume.includes("-")){var t=+e.consume.split("-")[0],s=+e.consume.split("-")[1];return e.val>=t&&e.val<=s}}},mounted(){}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.consumedList.length<=0?s("div",{staticClass:"flex-center"},[e._v("\n        Your daily list is empty. Add some food.\n    ")]):e._e(),e._v(" "),e.consumedList.length>0?s("div",[e._v("\n        You consumed within last 24 h:\n        "),e._l(e.consumedListSorted,function(t){return s("div",[s("div",{staticClass:"flex"},[s("div",{},[e._v("\n                    "+e._s(t.name)+" - "+e._s(t.value)+"g/ml\n                ")]),e._v(" "),s("div",{staticClass:"remove",on:{click:function(s){return e.remove(t)}}},[e._v("\n                    x\n                ")])]),e._v(" "),t.time?s("div",[e._v("at "+e._s(e._f("formatTime")(t.time)))]):e._e()])})],2):e._e(),e._v(" "),s("br"),e._v(" "),e.totalWithDaily.length>0?s("div",[e._v("\n        Your total nutrients / daily recommended / %\n        "),s("div",{staticClass:"table"},e._l(e.totalNutrients,function(t){return s("div",{staticClass:"row"},[s("div",{staticClass:"cell"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"cell",class:{red:e.isRed(t),green:e.isGreen(t)}},[e._v("\n                    "+e._s(e._f("round")(t.val))+" "+e._s(t.unit)+"\n                ")]),e._v(" "),t.daily_val?s("div",{staticClass:"cell"},[e._v("\n                    "+e._s(e._f("round")(t.daily_val))+" "+e._s(t.ru)+"\n                ")]):e._e(),e._v(" "),t.daily_val&&t.daily_val>0?s("div",{staticClass:"cell"},[e._v("\n                    "+e._s(e._f("round")(t.val/t.daily_val*100))+"%\n                ")]):e._e()])}),0)]):e._e()])},staticRenderFns:[]};var L=s("VU/8")(C,w,!1,function(e){s("oxDU")},"data-v-0538ccfc",null).exports,k={name:"AddElement",data:()=>({active:!0}),methods:{hide(){this.active=!1},show(){this.active=!0}},mounted(){}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.active?s("div",{staticClass:"bottom-bar",on:{click:function(t){return e.$emit("onClick")}}},[s("div",[e._v("Add food")])]):e._e()},staticRenderFns:[]};var b={name:"HelloWorld",data:()=>({consumedList:[],state:"show-list"}),components:{InputIngredient:c,InputValue:p,ConsumedList:L,AddElement:s("VU/8")(k,I,!1,function(e){s("weFS")},"data-v-149b19be",null).exports},mixins:[{data:()=>({store:null,savedList:[]}),methods:{$_store_add(e){if(this.store&&e&&e.value&&e.key){var t={value:e.value,timestamp:e.value.time};this.store.setItem(e.key,JSON.stringify(t))}},$_store_remove(e){this.store&&e&&e.key&&this.store.removeItem(e.key)},$_store_checkTimestamp(e){if(!this.store)return;if(!e)return;if(!e.key)return;return((e,t)=>{t<e&&t.setDate(t.getDate()+1);var s=t-e,a=Math.floor(s/1e3/60/60);return s-=1e3*a*60*60,s-=1e3*Math.floor(s/1e3/60)*60,s-=1e3*Math.floor(s/1e3),a>=24})(JSON.parse(this.store.getItem(e.key)).timestamp,(new Date).getTime().toString())},$_store_restoreList(){if(this.store)for(var e=0;e<this.store.length;e++){var t=this.store.key(e);t.includes("eatSmarterList")&&(this.$_store_checkTimestamp({key:t})?this.$_store_remove({key:t}):this.savedList.push(JSON.parse(this.store.getItem(t)).value))}}},mounted(){this.store=window.localStorage,this.$_store_restoreList()}}],methods:{add(e,t){if(!this.$refs.input.selectedItem)return;if(!e)return;var s={name:this.$refs.input.selectedItem.name,value:e,nutrients:this.$refs.input.selectedItemNutrients.nutrients.map(t=>(t=>({name:t.name,val:t.value/100*e,unit:t.unit}))(t)),key:this.generateId(),time:t||(new Date).getTime()};this.consumedList.push(s),this.$_store_add({key:s.key,value:s}),this.state="show-list"},remove(e){var t=this.consumedList.findIndex(t=>t.name===e.name);this.consumedList.splice(t,1),this.$_store_remove({key:e.key})},changeState(e){this.state=e}},mounted(){this.savedList.length>0&&(this.consumedList=this.savedList)}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},["add-element"===e.state?s("InputIngredient",{ref:"input"}):e._e(),e._v(" "),"add-element"===e.state?s("InputValue",{on:{add:e.add}}):e._e(),e._v(" "),"show-list"===e.state?s("ConsumedList",{attrs:{consumedList:e.consumedList},on:{remove:e.remove}}):e._e(),e._v(" "),"show-list"===e.state?s("AddElement",{ref:"addElement",on:{onClick:function(t){return e.changeState("add-element")}}}):e._e(),e._v(" "),"add-element"===e.state?s("div",{on:{click:function(t){return e.changeState("show-list")}}},[s("br"),e._v("\n      <<< Back to list\n  ")]):e._e()],1)},staticRenderFns:[]};var N=s("VU/8")(b,x,!1,function(e){s("cztf")},"data-v-66e46495",null).exports;a.a.use(r.a);var H=new r.a({routes:[{path:"/",name:"HelloWorld",component:N}]});a.a.config.productionTip=!1,a.a.mixin(m),new a.a({el:"#app",router:H,components:{App:i},template:"<App/>"})},UYmX:function(e,t){e.exports=[{name:"energy",daily_val:"2000",consume:"1800-2200",ru:"kcal"},{name:"protein",daily_val:"50",consume:"45-55",ru:"g"},{name:"total lipid (fat)",daily_val:"70",ru:"g"},{name:"saturated fatty acids",daily_val:"24",ru:"g"},{name:"carbohydrate, by difference",daily_val:"310",ru:"g"},{name:"sugars, total",daily_val:"90",ru:"g"},{name:"sodium, na",daily_val:"2300",consume:"0-2300",ru:"mg"},{name:"fiber, total dietary",daily_val:"30",ru:"g"},{name:"calcium, ca",daily_val:"0"},{name:"iron, fe",daily_val:"0"},{name:"vitamin c, total ascorbic acid",daily_val:"0"},{name:"vitamin a, iu",daily_val:"0"},{name:"fatty acids, total saturated",daily_val:"0"},{name:"cholesterol",daily_val:"0"},{name:"potassium, k",daily_val:"0"},{name:"Fatty acids, total trans",daily_val:"0"}]},cztf:function(e,t){},oxDU:function(e,t){},qMHP:function(e,t){},weFS:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b3673d68b900feca58fe.js.map